(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{350:function(e,t,n){"use strict";n.d(t,"a",(function(){return Rt}));var a={};n.r(a),n.d(a,"fetchAll",(function(){return ae})),n.d(a,"fetchByCategory",(function(){return re})),n.d(a,"create",(function(){return oe}));var r={};n.r(r),n.d(r,"loginOrCreateAccount",(function(){return ce})),n.d(r,"changePassword",(function(){return le}));var o={};n.r(o),n.d(o,"create",(function(){return ie})),n.d(o,"search",(function(){return ue})),n.d(o,"fetchOne",(function(){return se}));var c=n(351),l=n(0),i=n.n(l),u=n(572),s=n(299),m=n(50),d=n(305),f=n(5),p=n.n(f),b=n(16),g=n.n(b),y=n(9),E=n.n(y),h=n(562),v=n(569),O=n(242);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=n(181);function P(){return Object(x.a)()}var S=n(24),k=n.n(S),C=n(329),I=n(567),A=n(563),D=n(564),T=n(207),_=n(568),B={light:{text:"#000",background:"#fff",tint:"#2f95dc",tabIconDefault:"#ccc",tabIconSelected:"#2f95dc"},dark:{text:"#fff",background:"#000",tint:"#fff",tabIconDefault:"#ccc",tabIconSelected:"#fff"}},L=n(2),M=n(33),z=n(127),R=n(3);function V(e){var t=e.navigation;return l.createElement(R.a,{style:N.container},l.createElement(M.a,{style:N.title},"This screen doesn't exist."),l.createElement(z.a,{onPress:function(){return t.replace("Root")},style:N.link},l.createElement(M.a,{style:N.linkText},"Go to home screen!")))}var N=L.a.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center",padding:20},title:{fontSize:20,fontWeight:"bold"},link:{marginTop:15,paddingVertical:15},linkText:{fontSize:14,color:"#2e78b7"}}),W=n(65),F=n(85),H=n(43),U=n(267),q=n(270),G=n(40),J=n(271),Y=n(303),$=n(48),K=n(49),Q=n(73),X=n(34),Z=n(82),ee=n.n(Z);function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ae=function(e){var t;return E.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.token,n.next=3,E.a.awrap(ee.a.get(X.a.manifest.extra.API_BASE_URL+"/api/mementos/",{headers:{Authorization:"Bearer "+t}}));case 3:return n.abrupt("return",n.sent.data);case 4:case"end":return n.stop()}}),null,null,null,Promise)},re=function(e,t){var n;return E.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n=t.token,a.next=3,E.a.awrap(ee.a.get(X.a.manifest.extra.API_BASE_URL+"/api/mementos/?category="+e,{headers:{Authorization:"Bearer "+n}}));case 3:return a.abrupt("return",a.sent.data);case 4:case"end":return a.stop()}}),null,null,null,Promise)},oe=function(e,t){var n,a;return E.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.token,a=ne(ne({},Object($.omit)(e,["category"])),{},{category_id:e.category.id}),r.next=4,E.a.awrap(ee.a.post(X.a.manifest.extra.API_BASE_URL+"/api/mementos/",a,{headers:{Authorization:"Bearer "+n,"Content-Type":"application/json"}}));case 4:return r.abrupt("return",r.sent.data);case 5:case"end":return r.stop()}}),null,null,null,Promise)},ce=function(e,t){var n;return E.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n={username:e,password:t},a.next=3,E.a.awrap(ee.a.post(X.a.manifest.extra.API_BASE_URL+"/myauth/myauth/login_or_signup/",n));case 3:return a.abrupt("return",a.sent.data);case 4:case"end":return a.stop()}}),null,null,null,Promise)},le=function(e,t,n){var a,r;return E.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return a=n.token,r={currentPassword:e,newPassword:t},o.next=4,E.a.awrap(ee.a.post(X.a.manifest.extra.API_BASE_URL+"/myauth/myauth/change_password/",r,{headers:{Authorization:"Bearer "+a}}));case 4:return o.abrupt("return",o.sent.data);case 5:case"end":return o.stop()}}),null,null,null,Promise)},ie=function(e,t){var n,a;return E.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.token,a={name:e},r.next=4,E.a.awrap(ee.a.post(X.a.manifest.extra.API_BASE_URL+"/api/memento-categories/",a,{headers:{Authorization:"Bearer "+n}}));case 4:return r.abrupt("return",r.sent.data);case 5:case"end":return r.stop()}}),null,null,null,Promise)},ue=function(e,t){var n;return E.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n=t.token,t.limit,a.next=3,E.a.awrap(ee.a.get(X.a.manifest.extra.API_BASE_URL+"/api/memento-categories/?name="+e,{headers:{Authorization:"Bearer "+n}}));case 3:return a.abrupt("return",a.sent.data);case 4:case"end":return a.stop()}}),null,null,null,Promise)},se=function(e,t){var n;return E.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n=t.token,a.next=3,E.a.awrap(ee.a.get(X.a.manifest.extra.API_BASE_URL+"/api/memento-categories/"+e+"/",{headers:{Authorization:"Bearer "+n}}));case 3:return a.abrupt("return",a.sent.data);case 4:case"end":return a.stop()}}),null,null,null,Promise)},me=Object(Q.b)("auth/loginOrCreateAccount",(function(e,t){var n,a,o;return E.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.username,a=e.password,t.next=3,E.a.awrap(r.loginOrCreateAccount(n,a));case 3:return o=t.sent,t.abrupt("return",o);case 5:case"end":return t.stop()}}),null,null,null,Promise)})),de=Object(Q.b)("auth/changePassword",(function(e,t){var n,a,o;return E.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return n=e.currentPassword,a=e.newPassword,o=t.getState().auth.token,c.next=4,E.a.awrap(r.changePassword(n,a,{token:o}));case 4:case"end":return c.stop()}}),null,null,null,Promise)})),fe=Object(Q.c)({name:"auth",initialState:{is_logged_in:!1,username:"",token:""},reducers:{logout:function(e){e.is_logged_in=!1,e.username="",e.token=""}},extraReducers:function(e){e.addCase(me.fulfilled,(function(e,t){var n=t.payload,a=n.username,r=n.token;e.is_logged_in=!0,e.username=a,e.token=r}))}}),pe=fe.actions.logout,be=n(196),ge=n.n(be),ye=Object(Q.b)("mementos/fetchAll",(function(e,t){var n;return E.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.getState().auth.token,e.next=3,E.a.awrap(a.fetchAll({token:n}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),null,null,null,Promise)})),Ee=Object(Q.b)("mementos/create",(function(e,t){var n;return E.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.getState().auth.token,r.next=3,E.a.awrap(a.create(e,{token:n}));case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}),null,null,null,Promise)})),he=Object(Q.c)({name:"mementos",initialState:{entities:{}},reducers:{},extraReducers:function(e){e.addCase(ye.fulfilled,(function(e,t){var n=Object($.map)(t.payload,(function(e){return[e.id,e]})),a=Object($.fromPairs)(n);e.entities=a})),e.addCase(Ee.fulfilled,(function(e,t){Object($.set)(e.entities,t.payload.id,t.payload)})),e.addCase(pe,(function(e){e.entities={}}))}});ge()(he.actions);var ve=Object(Q.b)("categories/fetchOne",(function(e,t){var n,a;return E.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.getState().auth.token,r.next=3,E.a.awrap(o.fetchOne(e,{token:n}));case 3:return a=r.sent,r.abrupt("return",a);case 5:case"end":return r.stop()}}),null,null,null,Promise)})),Oe=Object(Q.c)({name:"mementoCategory",initialState:{entities:{}},reducers:{},extraReducers:function(e){e.addCase(ve.fulfilled,(function(e,t){e.entities[t.payload.id]=t.payload})),e.addCase(pe,(function(e){e.entities={}}))}});ge()(Oe.actions);var we=n(304),je=n(302),xe=n(266),Pe=n(268),Se=n(269),ke=function(e){var t,n,a=e.memento,r=e.onDismiss,o=e.showActions,c=void 0===o||o,u=Object(K.o)(),s=Object(l.useCallback)((function(){var e;r(),u.navigate("Root",{screen:"MementoStack",params:{screen:"MementoCategory",params:{categoryId:null==a||null==(e=a.category)?void 0:e.id}}})}),[null==a?void 0:a.id]);return i.a.createElement(we.a,null,i.a.createElement(je.a,{style:Ce.modal,visible:!Object($.isNil)(a),onDismiss:r},i.a.createElement(je.a.Title,null,null==a||null==(t=a.category)?void 0:t.name),i.a.createElement(je.a.Content,null,i.a.createElement(R.a,{style:Ce.section},i.a.createElement(xe.a,null,"Notes"),i.a.createElement(U.a,null,null==a?void 0:a.notes)),i.a.createElement(Pe.a,null),i.a.createElement(R.a,{style:Ce.section},i.a.createElement(xe.a,null,"Timestamp"),i.a.createElement(U.a,null,W.DateTime.fromISO(null==a?void 0:a.created_at).toLocaleString())),i.a.createElement(Pe.a,null),i.a.createElement(R.a,{style:Ce.section},i.a.createElement(xe.a,null,"Location"),i.a.createElement(U.a,null,null==a?void 0:a.location))),c&&i.a.createElement(je.a.Actions,null,i.a.createElement(Se.a,{onPress:s},"View ",null==a||null==(n=a.category)?void 0:n.name," history"))))},Ce=L.a.create({section:{marginVertical:8},modal:{alignSelf:"center",maxWidth:640,minWidth:320,paddingHorizontal:16}}),Ie=function(e){var t=Object(l.useState)(""),n=g()(t,2),a=n[0],r=n[1],o=Object(l.useState)(null),c=g()(o,2),u=c[0],s=c[1],d=Object(K.o)(),f=Object(m.b)(),p=Object(m.c)((function(e){return Object($.orderBy)(Object($.values)(e.mementos.entities),(function(e){return W.DateTime.fromISO(e.created_at)}),["desc"])})),b=Object(l.useMemo)((function(){return a?p.filter((function(e){return e.category.name.toLowerCase().includes(a.toLowerCase())})):p}),[p,a]);Object(l.useEffect)((function(){f(ye())}),[]);var y=Object(l.useCallback)((function(e){var t=e.item;return i.a.createElement(H.b.Item,{onPress:function(){return s(t)},title:t.category.name,description:function(e){return i.a.createElement(R.a,e,i.a.createElement(U.a,{numberOfLines:1,ellipsizeMode:"tail"},t.notes),i.a.createElement(R.a,{style:{flexDirection:"row"}},i.a.createElement(q.a,{icon:"calendar"},i.a.createElement(G.a,null,W.DateTime.fromISO(t.created_at).toLocaleString())),t.location&&i.a.createElement(q.a,{style:{marginLeft:8},icon:"map-marker"},i.a.createElement(G.a,null,t.location))))},left:function(e){return i.a.createElement(H.b.Icon,k()({},e,{icon:"note"}))}})}),[]);return i.a.createElement(R.a,{style:Ae.container},i.a.createElement(J.a,{style:Ae.filter,placeholder:"Search",value:a,onChangeText:r}),i.a.createElement(F.a,{style:Ae.list,data:b,renderItem:y,keyExtractor:function(e){return e.id}}),i.a.createElement(Y.a,{style:Ae.fab,icon:"plus",onPress:function(){return d.navigate("MementoCreate")}}),i.a.createElement(ke,{memento:u,onDismiss:function(){return s(null)}}))},Ae=L.a.create({container:{flex:1,alignItems:"center",paddingTop:24,display:"flex",flexDirection:"column",paddingHorizontal:24},filter:{maxWidth:640,minWidth:320},list:{flex:1,marginVertical:16,maxWidth:640,minWidth:320},fab:{position:"absolute",margin:16,right:0,bottom:0}}),De=n(89),Te=n(68),_e=n(130),Be=n(300),Le=n(272),Me=n(20),ze=n.n(Me),Re=n(338),Ve=n(96),Ne=n(131),We=function(){var e=Object(De.c)("category"),t=g()(e,3),n=t[0],a=(t[1],t[2]),r=Object(m.c)((function(e){return e.auth})),c=Object(l.useState)(""),u=g()(c,2),s=u[0],d=u[1],f=Object(l.useState)(n.value),p=g()(f,2),b=p[0],y=p[1],h=Object(l.useCallback)((function(e){var t;return E.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e,"create"!==(null==e?void 0:e.id)){n.next=5;break}return n.next=4,E.a.awrap(o.create(e.original,{token:r.token}));case 4:t=n.sent;case 5:a.setValue(t),y(t);case 7:case"end":return n.stop()}}),null,null,null,Promise)}),[null==r?void 0:r.token]),v=Object(l.useCallback)((function(){d(""),h(null)}),[h]),O=Object(l.useCallback)((function(){var e;return E.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(s.length<2)){t.next=2;break}return t.abrupt("return",[]);case 2:return t.next=4,E.a.awrap(o.search(s,{token:r.token}));case 4:return e=t.sent,t.abrupt("return",[].concat(ze()(e),[{id:"create",name:"Create: "+s,original:s}]));case 6:case"end":return t.stop()}}),null,null,null,Promise)}),[s,null==r?void 0:r.token]),w=Object(Re.a)({promiseFn:O}),j=w.data,x=void 0===j?[]:j,P=w.isPending,S=(w.error,Object(l.useCallback)((function(e){var t=e.item,n="create"===t.id?"pencil-plus":"tag";return i.a.createElement(H.b.Item,{title:t.name,left:function(e){return i.a.createElement(H.b.Icon,k()({},e,{icon:n}))},onPress:function(){return h(t)}})}),[]));return Object($.isNil)(b)?i.a.createElement(R.a,{style:Fe.container},i.a.createElement(Be.a,{label:"Search",mode:"outlined",style:Fe.field,value:s,onChangeText:d}),P&&i.a.createElement(Ne.a,{animating:!0}),i.a.createElement(F.a,{data:x,renderItem:S})):i.a.createElement(R.a,{style:Fe.container},i.a.createElement(H.b.Item,{title:b.name,left:function(e){return i.a.createElement(H.b.Icon,k()({},e,{icon:"tag"}))},right:function(e){return i.a.createElement(Ve.a,k()({},e,{onPress:v,icon:"delete"}))}}))},Fe=L.a.create({container:{flexDirection:"column",alignItems:"stretch",marginVertical:8},field:{marginVertical:8}}),He=function(){var e=Object(K.o)(),t=Object(m.b)(),n=Object(l.useCallback)((function(n){return E.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,E.a.awrap(t(Ee(n)));case 2:e.navigate("MementoHistory");case 3:case"end":return a.stop()}}),null,null,null,Promise)}),[]);return i.a.createElement(Te.a,null,i.a.createElement(R.a,{style:Ue.container},i.a.createElement(R.a,{style:Ue.column},i.a.createElement(_e.a,null,"Create Memento"),i.a.createElement(De.b,{initialValues:{notes:"",location:""},validationSchema:null,onSubmit:n},(function(e){var t=e.handleChange,n=e.handleBlur,a=e.handleSubmit,r=e.values,o=e.errors,c=e.touched;return i.a.createElement(i.a.Fragment,null,i.a.createElement(H.b.Section,null,i.a.createElement(H.b.Accordion,{title:"Category"},i.a.createElement(We,null)),i.a.createElement(H.b.Accordion,{title:"Info"},i.a.createElement(R.a,{style:Ue.innerAccordion},i.a.createElement(Be.a,{style:Ue.field,label:"Location",mode:"outlined",onChangeText:t("location"),onBlur:n("location"),value:r.location,error:!!o.location&&!!c.location}),i.a.createElement(Le.a,{type:"error",visible:!!o.location&&!!c.location},o.location),i.a.createElement(Be.a,{style:Ue.field,label:"Notes",mode:"outlined",multiline:!0,numberOfLines:4,onChangeText:t("notes"),onBlur:n("notes"),value:r.notes,error:!!o.notes&&!!c.notes}),i.a.createElement(Le.a,{type:"error",visible:!!o.notes&&!!c.notes},o.notes)))),i.a.createElement(Se.a,{onPress:a,mode:"outlined"},"Create"))})))))},Ue=L.a.create({column:{flex:1,alignItems:"stretch",paddingTop:24,paddingHorizontal:24,display:"flex",flexDirection:"column",maxWidth:480},container:{display:"flex",flexDirection:"row",justifyContent:"center"},innerAccordion:{},field:{marginVertical:8},createCategory:{marginVertical:8}}),qe=n(111),Ge=qe.a().shape({username:qe.b().required().max(120),password:qe.b().required().min(6)}),Je=function(){var e=Object(m.b)(),t=Object(K.o)(),n=Object(l.useCallback)((function(n,a){return E.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,E.a.awrap(e(me({username:n.username,password:n.password})).unwrap());case 3:t.navigate("Root"),r.next=9;break;case 6:r.prev=6,r.t0=r.catch(0),a.setStatus({type:"error",message:"Failed to register or login. You probably entered the wrong password for an existing account."});case 9:case"end":return r.stop()}}),null,null,[[0,6]],Promise)}),[]);return i.a.createElement(R.a,{style:Ye.container},i.a.createElement(R.a,{style:Ye.column},i.a.createElement(_e.a,null,"Login"),i.a.createElement(U.a,{style:Ye.notice},"If you don't have an account, one will be created with the given username and password"),i.a.createElement(De.b,{initialValues:{username:"",password:""},validationSchema:Ge,onSubmit:n},(function(e){var t=e.handleChange,n=e.handleBlur,a=e.values,r=e.handleSubmit,o=e.isValid,c=e.errors,l=e.touched,u=e.isSubmitting,s=e.status;return i.a.createElement(i.a.Fragment,null,i.a.createElement(Be.a,{style:Ye.field,label:"Username",mode:"outlined",onChangeText:t("username"),onBlur:n("username"),value:a.username,error:!!c.username&&!!l.username}),i.a.createElement(De.a,{name:"username"},(function(e){return i.a.createElement(Le.a,{type:"error"},e)})),i.a.createElement(Be.a,{style:Ye.field,label:"Password",mode:"outlined",secureTextEntry:!0,onChangeText:t("password"),onBlur:n("password"),value:a.password,error:!!c.password&&!!l.password}),i.a.createElement(De.a,{name:"password"},(function(e){return i.a.createElement(Le.a,{type:"error"},e)})),i.a.createElement(Se.a,{style:Ye.getStartedAction,disabled:!o||u,loading:u,onPress:r,mode:"outlined"},"Get Started"),s&&i.a.createElement(Le.a,{style:Ye.errorStatus,type:"error"},null==s?void 0:s.message))}))))},Ye=L.a.create({container:{display:"flex",flexDirection:"row",justifyContent:"center"},column:{flex:1,alignItems:"stretch",paddingTop:24,paddingHorizontal:24,display:"flex",flexDirection:"column",maxWidth:480},field:{marginVertical:8},getStartedAction:{marginTop:8},notice:{marginVertical:8},errorStatus:{marginTop:8}}),$e=n(55),Ke=qe.a().shape({currentPassword:qe.b().required().min(6).max(32),newPassword:qe.b().required().min(6).max(32)}),Qe=function(){var e=Object(m.b)(),t=Object(l.useCallback)((function(t,n){return E.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,E.a.awrap(e(de(t)));case 2:case"end":return n.stop()}}),null,null,null,Promise)}),[]);return i.a.createElement(R.a,{style:{}},i.a.createElement(De.b,{initialValues:{currentPassword:"",newPassword:""},validationSchema:Ke,onSubmit:t},(function(e){var t=e.handleChange,n=e.handleBlur,a=e.handleSubmit,r=e.values,o=e.errors,c=e.touched;return i.a.createElement(i.a.Fragment,null,i.a.createElement(Be.a,{style:Xe.field,label:"Current Password",mode:"outlined",secureTextEntry:!0,onChangeText:t("currentPassword"),onBlur:n("currentPassword"),value:r.currentPassword,error:!!o.currentPassword&&!!c.currentPassword}),i.a.createElement(Le.a,{type:"error",visible:!!o.currentPassword&&!!c.currentPassword},o.currentPassword),i.a.createElement(Be.a,{style:Xe.field,label:"New Password",mode:"outlined",secureTextEntry:!0,onChangeText:t("newPassword"),onBlur:n("newPassword"),value:r.newPassword,error:!!o.newPassword&&!!c.newPassword}),i.a.createElement(Le.a,{type:"error",visible:!!o.newPassword&&!!c.newPassword},o.newPassword),i.a.createElement(Se.a,{onPress:a,mode:"outlined"},"Submit"))})))},Xe=L.a.create({field:{marginVertical:8}}),Ze=function(){var e=Object(m.b)(),t=Object(l.useCallback)((function(){e(pe())}),[]);return i.a.createElement(R.a,{style:et.container},i.a.createElement(R.a,{style:et.column},i.a.createElement(_e.a,null,"Account"),i.a.createElement($e.a,{style:et.section},i.a.createElement(xe.a,null,"Change Password"),i.a.createElement(Qe,null)),i.a.createElement($e.a,{style:et.section},i.a.createElement(xe.a,null,"Logout"),i.a.createElement(Se.a,{style:et.logoutAction,mode:"outlined",onPress:t},"Logout"))))},et=L.a.create({container:{display:"flex",flexDirection:"row",justifyContent:"center"},column:{flex:1,alignItems:"stretch",paddingTop:24,paddingHorizontal:24,display:"flex",flexDirection:"column",maxWidth:480},section:{marginVertical:8,padding:16,borderRadius:8},logoutAction:{marginTop:8}});function tt(e){e.navigation;return l.createElement(Ie,null)}var nt=n(206),at=n.n(nt),rt=n(189),ot=n(23),ct=n(150);function lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function it(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ut=function(e){var t=e.mementos,n=Object(l.useMemo)((function(){for(var e=[],n=Object($.map)(t,(function(e){return W.DateTime.fromISO(e.created_at).toISODate()})),a=Object($.reduce)(n,(function(e,t){var n;return it(it({},e),{},p()({},t,(null!=(n=e[t])?n:0)+1))}),{}),r=W.DateTime.now().minus(W.Duration.fromObject({days:30})),o=1;o<=30;o++){var c=r.plus(W.Duration.fromObject({days:o})).toISODate();e.push(Object($.get)(a,c,0))}return e}),[t]),a=Object(ct.d)(),r=a.width,o=a.height,c=a.onLayout,u=Object(ct.c)({width:r,height:o,data:n,contentInset:{top:20,bottom:20}}),s=u.x,m=u.y,d=u.mappedData,f=Object(ct.e)({mappedData:d,x:s,y:m}).line;return i.a.createElement(ct.a,{style:{height:200},width:r,height:o,onLayout:c},i.a.createElement(st,null),i.a.createElement(ct.b,{fill:"none",strokeWidth:2,stroke:"url(#gradient)",d:f,animate:!0,animationDuration:300}))},st=function(){return i.a.createElement(ot.Defs,{key:"gradient"},i.a.createElement(ot.LinearGradient,{id:"gradient",x1:"0",y:"0%",x2:"100%",y2:"0%"},i.a.createElement(ot.Stop,{offset:"0%",stopColor:"rgb(134, 65, 244)"}),i.a.createElement(ot.Stop,{offset:"100%",stopColor:"rgb(66, 194, 244)"})))};function mt(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dt(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var ft=function(e){var t=e.categoryId,n=Object(l.useState)(null),a=g()(n,2),r=a[0],o=a[1],c=Object(m.b)(),u=Object(m.c)((function(e){return e.categories.entities[t]})),s=Object(m.c)((function(e){return Object($.orderBy)(Object($.filter)(Object($.values)(e.mementos.entities),(function(e){return e.category.id===t})),(function(e){return W.DateTime.fromISO(e.created_at)}),["desc"])})),d=Object($.size)(s),f=Object(l.useMemo)((function(){return s.map((function(e){var t=W.DateTime.fromISO(e.created_at).diffNow("days").days;return Math.floor(Math.abs(t))}))}),[s]),p=Object(l.useMemo)((function(){for(var e,t=[],n=[],a=mt(ze()(new Set(f)).sort());!(e=a()).done;){var r=e.value;if(0!==n.length){var o=n,c=at()(o),l=c[0];c.slice(1);l+1===r?n=[r].concat(ze()(n)):n.length>t.length&&(t=n)}else n=[r]}return t.length}),f);Object(l.useEffect)((function(){c(ve(t)),c(ye())}),[t]);var b=Object(l.useCallback)((function(e){var t=e.item;return i.a.createElement(H.b.Item,{title:t.category.name,description:function(e){return i.a.createElement(R.a,e,i.a.createElement(U.a,{numberOfLines:1,ellipsizeMode:"tail"},t.notes),i.a.createElement(R.a,{style:{flexDirection:"row"}},i.a.createElement(q.a,{icon:"calendar"},i.a.createElement(M.a,null,W.DateTime.fromISO(t.created_at).toLocaleString())),t.location&&i.a.createElement(q.a,{style:{marginLeft:8},icon:"map-marker"},i.a.createElement(M.a,null,t.location))))},onPress:function(){return o(t)},left:function(e){return i.a.createElement(H.b.Icon,k()({},e,{icon:"note"}))}})}),[]);return i.a.createElement(R.a,{style:pt.container},i.a.createElement(Te.a,null,i.a.createElement(rt.a,{style:pt.card},i.a.createElement(rt.a.Title,{title:""+(null==u?void 0:u.name),left:function(e){return i.a.createElement(H.a.Icon,k()({},e,{icon:"note"}))}}),i.a.createElement(rt.a.Content,null,i.a.createElement(R.a,{style:pt.section},i.a.createElement(xe.a,null,"First entry"),i.a.createElement(U.a,null,W.DateTime.fromISO(null==u?void 0:u.created_at).toLocaleString())),i.a.createElement(Pe.a,null),i.a.createElement(R.a,{style:pt.section},i.a.createElement(xe.a,null,"Number of entries"),i.a.createElement(U.a,null,d)),i.a.createElement(Pe.a,null),i.a.createElement(R.a,{style:pt.section},i.a.createElement(xe.a,null,"Longest daily streak"),i.a.createElement(U.a,null,p," days")),i.a.createElement(Pe.a,null),i.a.createElement(R.a,{style:pt.section},i.a.createElement(xe.a,null,"Frequency (last 30 days)"),i.a.createElement(ut,{mementos:s})))),i.a.createElement(rt.a,{style:[pt.card]},i.a.createElement(rt.a.Title,{title:"History",left:function(e){return i.a.createElement(H.a.Icon,k()({},e,{icon:"note-multiple"}))}}),i.a.createElement(rt.a.Content,null,i.a.createElement(F.a,{data:null!=s?s:[],renderItem:b,keyExtractor:function(e){return e.id}})))),i.a.createElement(ke,{memento:r,onDismiss:function(){return o(null)},showActions:!1}))},pt=L.a.create({container:{flex:1,alignItems:"center",paddingTop:24,display:"flex",flexDirection:"column"},card:{maxWidth:640,minWidth:240,marginVertical:8},section:{marginVertical:8}});function bt(e){e.navigation;var t,n=e.route;return l.createElement(ft,{categoryId:null==(t=n.params)?void 0:t.categoryId})}var gt=function(){return l.createElement(Ze,null)},yt={prefixes:[n(352).a("/")],config:{screens:{Root:{screens:{MementoStack:{screens:{MementoHistory:"mementos/history",MementoCreate:"mementos/create",MementoCategory:"categories/"}},Settings:"settings"}},Auth:"auth",NotFound:"*"}}};function Et(e){e.navigation,e.route;return l.createElement(He,null)}function ht(e){e.navigation,e.route;return l.createElement(Je,null)}var vt=n(301),Ot=function(e){var t,n=e.navigation,a=e.previous,r=null!=(t=e.options.title)?t:"Mementos";return i.a.createElement(vt.a.Header,null,a?i.a.createElement(vt.a.BackAction,{onPress:n.goBack}):null,i.a.createElement(vt.a.Content,{title:r}))};function wt(e){var t=e.colorScheme;return l.createElement(A.a,{linking:yt,theme:"dark"===t?D.a:T.a},l.createElement(xt,null))}var jt=Object(_.a)();function xt(){var e=Object(m.c)((function(e){return e.auth.is_logged_in}));return l.createElement(jt.Navigator,null,e?l.createElement(l.Fragment,null,l.createElement(jt.Screen,{name:"Root",component:St,options:{headerShown:!1}}),l.createElement(jt.Screen,{name:"NotFound",component:V,options:{title:"Oops!"}})):l.createElement(l.Fragment,null,l.createElement(jt.Screen,{name:"Auth",component:ht,options:{title:"Mementos"}})))}var Pt=Object(I.a)();function St(){var e=P();return l.createElement(Pt.Navigator,{initialRouteName:"MementoStack",screenOptions:{tabBarActiveTintColor:B[e].tint,tabBarShowLabel:!1,header:function(e){return l.createElement(Ot,e)}}},l.createElement(Pt.Screen,{name:"MementoStack",component:Ct,options:{tabBarIcon:function(e){var t=e.color;return l.createElement(It,{name:"note-multiple",color:t})}},listeners:function(e){var t=e.navigation;e.route;return{tabPress:function(){t.navigate("MementoHistory")}}}}),l.createElement(Pt.Screen,{name:"Settings",component:gt,options:{title:"Settings",tabBarIcon:function(e){var t=e.color;return l.createElement(It,{name:"account",color:t})}}}))}var kt=Object(_.a)();function Ct(){return l.createElement(kt.Navigator,{screenOptions:{headerShown:!1}},l.createElement(kt.Screen,{name:"MementoHistory",component:tt}),l.createElement(kt.Screen,{name:"MementoCategory",component:bt}),l.createElement(kt.Screen,{name:"MementoCreate",component:Et}))}function It(e){return l.createElement(C.a,k()({size:30,style:{marginBottom:-3}},e))}var At=n(69),Dt=n(102),Tt=n(349),_t={key:"root",version:1,storage:n.n(Tt).a},Bt=Object(At.b)({mementos:he.reducer,auth:fe.reducer,categories:Oe.reducer}),Lt=Object(Dt.g)(_t,Bt),Mt=Object(Q.a)({reducer:Lt,middleware:function(e){return e({serializableCheck:{ignoredActions:[Dt.a,Dt.f,Dt.b,Dt.c,Dt.d,Dt.e]}})}}),zt=Object(Dt.h)(Mt);function Rt(){var e=function(){var e=l.useState(!1),t=g()(e,2),a=t[0],r=t[1];return l.useEffect((function(){E.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O.b(),e.next=4,E.a.awrap(v.b(j(j({},h.a.font),{},{"space-mono":n(393)})));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn(e.t0);case 9:return e.prev=9,r(!0),O.a(),e.finish(9);case 13:case"end":return e.stop()}}),null,null,[[0,6,9,13]],Promise)}),[]),a}(),t=P();return e?i.a.createElement(m.a,{store:Mt},i.a.createElement(d.a,{loading:null,persistor:zt},i.a.createElement(s.a,null,i.a.createElement(u.b,null,i.a.createElement(wt,{colorScheme:t}),i.a.createElement(c.a,null))))):null}},373:function(e,t,n){e.exports=n(554)},393:function(e,t,n){e.exports=n.p+"./fonts/SpaceMono-Regular.ttf"},544:function(e,t){}},[[373,1,2]]]);
//# sourceMappingURL=app.75c2b03d.chunk.js.map